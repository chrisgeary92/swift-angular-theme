var app=angular.module("app",["ngRoute","ngSanitize"]);app.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:swift.templates+"/index.html",controller:"Index"}).when("/:slug/",{templateUrl:swift.templates+"/single.html",controller:"Single"}).when("/category/:category/",{templateUrl:swift.templates+"/index.html",controller:"Category"}).when("/category/:category/page/:page/",{templateUrl:swift.templates+"/index.html",controller:"Category"}).when("/page/:page/",{templateUrl:swift.templates+"/index.html",controller:"Index"}).otherwise({templateUrl:swift.templates+"/404.html",controller:"404"}),t.html5Mode(!0)}]),app.controller("Index",["$scope","$http","$routeParams","$wpService",function(e,t,r,o){o.getAllCategories(),o.getPosts(r.page),e.data=o}]),app.controller("404",function(){document.querySelector("title").innerHTML="Page not found | "+swift.site_name}),app.controller("Category",["$scope","$http","$routeParams","$wpService",function(e,t,r,o){o.getAllCategories(),t.get(swift.root+"/wp-json/wp/v2/categories?slug="+r.category).success(function(e){o.getPostsInCategory(e[0],r.page)}),e.data=o}]),app.controller("Single",["$scope","$http","$routeParams","$wpService",function(e,t,r,o){o.getPostBySlug(r.slug),e.data=o}]),app.filter("toTrusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),app.directive("swiftSearchForm",function(){return{restrict:"E",templateUrl:swift.templates+"/search-form.html",controller:["$scope","$http","$wpService",function(e,t,r){e.filter={s:""},e.search=function(){r.getSearchResults(e.filter.s)}}]}}),app.directive("postsNavLink",function(){return{restrict:"E",templateUrl:swift.templates+"/posts-nav-link.html",controller:["$scope","$element","$routeParams",function(e,t,r){var o=r.page?parseInt(r.page):1,n=r.category?"category/"+r.category+"/page/":"page/";e.postsNavLink={prevLink:n+(o-1),nextLink:n+(o+1),sep:t.attr("sep")?t.attr("sep"):"|",prevLabel:t.attr("prev-label")?t.attr("prev-label"):"Previous",nextLabel:t.attr("next-label")?t.attr("next-label"):"Next"}}]}}),app.factory("$wpService",["$http",function(e){function t(e,t,r){n.posts=e,n.currentPage=t,n.totalPages=r("x-wp-totalpages")}function r(e,t){t=t?parseInt(t):1,n.pageTitle=e+(t>1?" (Page: "+t+")":"")}function o(e){document.querySelector("title").innerHTML=(e.length?e+" | ":"")+swift.site_name}var n={categories:[],posts:[],currentPage:1,totalPages:1,pageTitle:""};return n.getPostBySlug=function(t){e.get(swift.root+"/wp-json/wp/v2/posts?filter[name]="+t,{cache:!0}).success(function(e){n.post=e[0],o(e[0].title.rendered)})},n.getAllCategories=function(){return n.categories.length?void 0:e.get(swift.root+"/wp-json/wp/v2/categories",{cache:!0}).success(function(e){n.categories=e})},n.getPosts=function(n){return n=n?parseInt(n):1,e.get(swift.root+"/wp-json/wp/v2/posts?per_page=4&page="+n,{cache:!0}).success(function(e,a,s){r(n>1?"Archives ":"",n),o("Articles"),t(e,n,s)})},n.getPostsInCategory=function(n,a){return a=a?parseInt(a):1,e.get(swift.root+"/wp-json/wp/v2/posts?per_page=4&filter[category_name]="+n.slug+"&page="+a,{cache:!0}).success(function(e,s,l){r("Category: "+n.name,a),o("Category: "+n.name),t(e,a,l)})},n.getSearchResults=function(a){return a.length?e.get(swift.root+"/wp-json/wp/v2/posts?per_page=0&filter[s]="+a,{cache:!0}).success(function(e,n,s){r("Search: "+a),o("Search: "+a),t(e,1,s)}):void n.getPosts()},n}]);